name: CD
on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * *' # Once per day at 00:00 UTC
  push:
    branches:
      - main

jobs:
  cd:
    name: Integration Deployment
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
      with:
        submodules: true

    - uses: Roblox/setup-foreman@v1
      with:
        version: "^1.0.0"
        token: ${{ secrets.GITHUB_TOKEN }}

    - name: Run Foreman
      run: foreman install

    - name: Run Wally
      run: wally install


    - name: Deploy
      run: rojo upload --cookie "_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_F16F9E92E3B44405CFABE49975AC5CBB0ABD0A553B9C9ECBF391C9540D04B32C0205E2D754AFA3FADA035D65D54B9D68E157CD10D0BF97172683D6FF541952F32C07D4F0AAB9EF3265F95A5B32D03EFC5F66938C48660B775CDEBA2391809D95B3573A453C7845D95CE94F34F1E18F7E65181BA6DE883C9016365950FF06DB977B6FB1E6B7E12A3BE00397162860C05BD5E20FC540197655ADC78D51D3540D2DB1C781A4BC4C7572734F240D64BA6FE9A2149126DC3F86D9F16949D5CBC52F5581B5AE5A06A7EA31744DC6833C3C73738E7C8899B57A3A4E3C627C90FD1069202FEDCC6682EAC55AB1F15AECD5B81940D0F232420680CCBBD78B588773A5133ABA9E05717FE3987E2A5D8FC6A352DBCBF585FCD4B87C5A9BE46E22FB0646AC10F6D7260B65C8B0FED40B3BB2FB5A3E5D6F068E8FF2B414C0FFC4CFF3D067E9F1D66C0AE312CDC1FADCFA69C3D37D411920D882061F0DC1C80C9AA94EBF0EABDC8AE44003" --asset_id 9141286177
      env:
        ROBLOSECURITY: ${{ secrets.CD_ROBLOSECURITY }}

